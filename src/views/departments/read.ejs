<section class="content">
  <div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1 class="mb-0">Departments</h1>
      <a href="/departments/create" class="btn btn-primary">
        <i class="fas fa-plus"></i> Add New Department
      </a>
    </div>

    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Dept Code</th>
          <th>Dept Description</th>
          <th style="width: 150px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% departments.forEach((dept, i) => { %>
          <tr>
            <td><%= i + 1 %></td>
            <td><%= dept.dept_code %></td>
            <td><%= dept.dept_desc %></td>
            <td>
              <div style="display: flex; gap: 8px; align-items: center;">
                <a href="/department/edit/<%= dept.id %>" class="btn btn-sm btn-warning">
                  <i class="fas fa-edit"></i> Edit
                </a>
                <form action="/department/remove/<%= dept.id %>?_method=DELETE" method="POST" class="d-inline" onsubmit="return confirm('Are you sure?');">
                  <button type="submit" class="btn btn-sm btn-danger">
                    <i class="fas fa-trash"></i> Delete
                  </button>
                </form>
              </div>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</section>

<% if (status && status[0] === "success") { %>
  <script>
    Swal.fire({
      title: 'Success!',
      text: "<%= msg[0] %>",
      icon: 'success',
      showConfirmButton: false,
      timer: 3000,
      timerProgressBar: true
    });
  </script>
  <% } %>

<% if (status && status[0] === "failed") { %>
  <script>
    Swal.fire({
      title: 'Failed!',
      text: "<%= msg[0] %>",
      icon: 'error',
      showConfirmButton: false,
      timer: 3000,
      timerProgressBar: true
    });
  </script>
<% } %>